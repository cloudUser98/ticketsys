<form id="someform"
    data-hx-get="src/table"
    data-hx-target="#data"
    data-hx-trigger="submit"
    data-hx-swap="innerhtml"
    >
    
    <div class="mt-2">
        <label class="block mb-2 text-sm font-medium text-gray-900" for="test">Upload file</label>
        <input class="file:bg-indigo-900 file:border-0 file:text-white file:hover:bg-indigo-950 file:cursor-pointer block w-full text-gray-900 border border-gray-300 rounded-md cursor-pointer bg-gray-50 shadow-md focus:outline-none" aria-describedby="test_help" id="test" type="file" required>
        <p class="mt-1 text-sm text-gray-500 " id="test_help" name="test">XLSX o CSV.</p>
    </div>

    <div id="last-folio" class="font-bold text-red-700"></div>

    <button type="submit">Cargar</button>
</form>

<section>
    <!-- <h2 class="font-bold">Tickets</h2> -->
    <!-- <div id="data"></div> -->
    <div class="relative overflow-x-auto shadow-md">
        <table id="tickets" class="w-full text-sm text-left rtl:text-right text-gray-500">
            <thead class="text-xs text-gray-700 uppercase bg-gray-50">
                <tr>
                    <!-- <th scope="col" class="px-6 py-3">
                        Folio
                    </th> -->
                    <th scope="col" class="px-6 py-3">
                        Producto
                    </th>
                    <th scope="col" class="px-6 py-3">
                        Precio
                    </th>
                </tr>
            </thead>
            <tbody>
                <!-- <tr class="odd:bg-white even:bg-gray-50 border-b">
                    <th scope="row" class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap">
                        Apple MacBook Pro 17"
                    </th>
                    <td class="px-6 py-4">
                        Silver
                    </td>
                </tr>
                <tr class="odd:bg-white even:bg-gray-50 border-b">
                    <th scope="row" class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap">
                        Microsoft Surface Pro
                    </th>
                    <td class="px-6 py-4">
                        White
                    </td>
                </tr> -->
            </tbody>
            <tfoot>
                <tr class="font-semibold text-gray-900">
                    <th scope="row" class="px-6 py-3 text-base">Total</th>
                    <td id="total" class="px-6 py-3"></td>
                </tr>
            </tfoot>
        </table>
    </div>
</section>

<script>
    document.getElementById("someform").addEventListener('submit', async function(event) {
        event.preventDefault(); // Prevent the default form submission

        // Get the file input element
        const fileInput = document.getElementById("test");

        // Get the file from the input element
        const file = fileInput.files[0];

        const ab = await file.arrayBuffer();
        const ui8a = new Uint8Array(ab);

        readFile(ui8a);
    });
</script>
